# 第一部分 授课内容(理论考试) 约50%
## 一 规范化理论
1.  什么叫规范化？非规范化的关系会导致什么问题？
    - 用形式更为简洁、结构更加规范的关系模式取代原有关系的过程
    - 非规范化的关系会导致
        - 数据冗余
        - 更新异常
        - 插入异常
        - 删除异常
2. 理解概念：
    1. 函数依赖
        - 设R(U)是属性集U上的关系模式，X，Y是U的子集。若对于R(U)的任意一个可能的关系r，r中不可能存在两个元组在X上的属性值相等，而在Y上的属性值不等，则称X函数确定Y或Y函数依赖于X，记作X→Y
    2. 部分函数依赖
        - 若X→Y，但Y不完全依赖于X，则称Y对X部分函数依赖
    3. 完全函数依赖
        - 在R(U)中，如果X→Y，并且对于X的任何一个真子集X'，都有X'-/→Y',则称Y对X完全函数依赖
    4. 传递依赖
        - 在R(U)中，如果X→Y(Y不属于X)，Y-/→X，Y→Z ,Z不包含于Y则称Z对X传递函数依赖
    5. 1NF
        - 每一个分量必须是不可分的数据组
    6. 2NF
        - 若R∈1NF，且每个非主属性完全函数依赖于任何一个候选码，则R∈2NF
        - 即没有部分依赖
    7. 3NF
        - 设关系模式R<U,F>∈1NF，若R中不存在这样的码X，属性组Y即非主属性Z(Z不包含于Y)使得X→Y，Y→Z成立Y-/→X，则称R<U,F>∈3NF
        - 即没有传递依赖
    8. BCNF
        - 关系模式R<U,F>∈1NF，若X→Y且Y不包含于X时X必含有码，则R<U,F>∈BCNF
        - 也就是说，关系模式R<U,F>中，若每一个决定因素都包含码，则R<U,F>∈BCNF

[https://blog.csdn.net/hbrqlpf/article/details/1887204](https://blog.csdn.net/hbrqlpf/article/details/1887204)

## 二 安全性概述
3. 什么是数据库的安全性？
    - 保护数据库以防止不合法使用所造成的数据泄露、更改或破坏
4. 试述信息安全标准的发展史，试述CC评估保证级划分的基本内容
    - 发展史：
        - TCSEC(**桔皮书**)：1985年美国国防部正式颁布的《DoD 可信计算机系统评估准则》(Trusted Computer System Evaluation Criteria 或者 DoD85)
        - 在TCSEC推出后的10年里，不同的国家都开始启动开发建立在TCSEC概念上的评估准则，如欧洲的信息技术安全评估准则(ITSEC)、加拿大的可信计算机产品评估准则(CTCPEC)、美国的信息技术安全联邦标准(FC)草案等
        - 1993年，CTCPEC、FC、TCSEC和ITSEC的发起组织开始联合行动，解决原标准中概念和技术上的差异，将各自独立的准则集合成一组单一的、能广泛使用的IT安全准则，这一行动被称为 **通用准则(CC)项目**
        - 1991年4月，美国国家计算机安全中心(NCSC)颁布了《可信计算机系统评估准则关于可信数据库系统的解释》(TCSEC/Trusted Database Interpretation,TCSEC/TDI,**紫皮书**)
    - 基本内容
        - ![这里本里应该有张图](/data/database/1.bmp)
5. TCSEC(TDI)安全级别等级划分的基本内容是什么？
    - 安全策略、责任、保证和文档
6. 数据库安全的技术手段有哪三类？试举例说明
    1. 预防保护类
    2. 检测跟踪类
    3. 响应恢复类
7. SQL server中，常见的数据库安全策略包括哪些
    1. 使用安全的密码策略
    2. 使用安全的账号策略
    3. 加强数据库日志的记录
    4. 管理扩展存储过程
    5. 使用协议加密
    6. 不要让人随便探测到您的TCP/IP端口
    7. 修改TCP/IP使用的端口
    8. 拒绝来自1434端口的探测
    9. 对网络连接进行IP限制

## 三 SQL深入学习(视图、存储过程)
8. 什么叫存储过程?存储过程对数据库的安全性有哪些帮助?
    - 存储过程是由过程化SQL语句书写的过程，这个过程经编译和优化后存储在数据库服务器中，因此称它为存储过程，使用时只要调用即可
    - 帮助：
        - 运行效率高，提供了在服务器端快速执行SQL语句的有效途径
        - 存储过程降低了客户机和服务器之间的通信量
        - 方便实施企业规则
9. 如何用SQL语言进行存储过程创建和管理?
    - 创建
    ```sql
    CREATE OR REPLACE PROCEDURE 过程名 ([arg1,arg2])
    AS <过程化SQL块>
    ```
    - 执行
    ```sql
    CALL/PERFORM PROCEDURE 过程名([arg1,arg2])
    ```
    - 修改
    ```sql
    重命名：
    ALTER PROCEDURE 过程名1 RENAME TO 过程名2
    重新编译：
    ALTER PROCEDURE 过程名 COMPILE
    ```
    - 删除
    ```sql
    DROP PROCEDURE 过程名()
    ```
10. 什么叫视图?视图对数据库安全的作用?
    - 视图是从一个或几个基本表(或视图)导出的表。它与基本表不同，是一个虚表。数据库中只存放视图的定义，而不存放视图对应的数据，这些数据仍存放在原来的基本表中
    - 作用
        - 视图能够简化用户的操作
        - 视图使用户能以多种角度看待同一数据
        - 视图对重构数据库提供了一定程度的逻辑独立性
        - 视图能够对机密数据提供安全保护
        - 适当利用视图可以更清晰地表达查询
11. 如何用SQL语言进行视图建立和管理
    - 建立视图
    ```sql
    CREATE VIEW <视图名>[(<列名>,[<列名>]...)]
    AS <子查询>
    [WITH CHECK OPTION]
    ```
    - 删除视图
    ```sql
    DROP VIEW <视图名> [CASCADE]
    --CASCADE 级联删除
    ```
    - 查询视图
    - 更新视图

## 四 数据库完整性约束

12. 理解概念
    1. 候选码
    2. 主码
    3. 外码
    4. 主属性
    5. 非主属性
    6. 全码

13. DBMS的完整性控制机制应具有哪些功能？RDBMS在实现参照完整性时需要考虑哪些方面
    1. DBMS
        - 定义功能，提供定义完整性约束条件的机制
        - 检查功能，检查用户发出的操作请求是否违背了完整性约束条件
        - 违约处理，如果发现用户的操作请求使数据违背于完整性约束条件则采取一定的动作来保证数据的完整性
    2. RDBMS
        - 被参照的属性必须在被参照的表中定义为主码
        - 被参照的属性和参照的属性数据类型必须一致
        - 参照的属性取值范围不得超出被参照属性的值域，可以为空值 

14. 数据库约束机制有哪些？
    - 主键约束
    - 外键约束
    - 唯一性约束
    - 检查约束
    - 默认约束
    - 非空约束

## 五 触发器
15. 触发器的概念
    - 触发器是一种特殊的存储过程，它不能被显示地调用，而是在往表中插入记录、更新记录或者删除记录时，被自动地激活
16. 触发器的优点
    - 自动执行
    - 能够对数据库中的相关表实现级联修改
    - 可以实现比CHECK约束更为复杂的数据完整性约束
    - 可以评估数据修改前后的表的状态，并根据其差异采取对策
    - 一个表中可以同时存在三个不同操作的触发器(INSERT,UPDATE或DELETE)，对于同一个修改语句可以有多个不同的响应对策
17. 触发器的类型
    1. 按触发事件：
        - DML触发器
        - DDL触发器
    2. 按动作响应时间：
        - AFTER(FOR)触发器：后触发器，该类触发器是在引起触发器执行的修改语句成功完成之后执行
        - INSTEAD OF触发器：替代触发器，当引起触发器执行的修改语句停止时，该类触发器替代触发操作执行
    3. 按激活的机制：
        - insert触发器
        - update触发器
        - delete触发器
    4. DML可以按动作响应时间和激活机制不同任意组合，有6种类型
    5. DDL触发器的动作响应时间只有AFTER型
    6. CLR触发器既可以是DML触发器，也可以是DDL触发器
19. DML触发器
    1. AFTER触发器(后触发器)：在触发器事件语句(INSERT、UPDATE、DELETE)执行成功之后，才执行触发器的动作语句.此类触发器不能创建在视图上
    2. INSERT OF触发器(替代触发器)：是在触发器事件语句(INSERT、UPDATE、DELETE)执行前，取消事件语句，用触发器的动作语句来替代要执行的触发器事件语句完成操作。该类触发器既可在表上定义，也可在视图上定义。对于每个触发操作(INSERT、UPDATE、DELETE)，只能定义一个INSTEAD OF触发器
    3. 两个专用表：Insertd表和Deleted表
        1. 这两个表由系统来维护，他们存在于内存中而不是在数据库中
        2. 这两个表的结构总是与该触发器作用的表的结构相同
        3. 触发器执行完成后，与该触发器相关的两个表也被删除
        4. Deleted表存放由于执行Delete或Update语句而要从表中删除的所有行
        5. Insertd表存放由于执行Insert或Update语句而要向表中插入的所有行
20. DDL触发器
    1. 类似于DML触发器，也可以自动触发完成规定的操作或使用CREATE TRIGGER语句创建，但DDL触发器的触发事件主要是CREATE、ALTER、DROP、GRANT、DENY、REVOKE等语句，并且触发的时间条件只有AFTER，没有INSTEAD OF
    2. 主要用于以下操作：
        1. 防止对数据库架构进行某些修改
        2. 希望对数据库中发生某种情况以便于相应数据库架构中的修改
        3. 记录数据库架构中的更改或事件

## 六 并发控制
20. 事务的概念及事务的四个特性
    1. 概念：事务是用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位
    2. 特性：
        1. 原子性
        2. 一致性
        3. 隔离性
        4. 持续性
21. 多事务执行的方式有哪些
    1. 串行执行
    2. 并行执行
22. 事务并发执行带来哪些问题？在数据库中为什么要并发控制
    1. 事务的ACID特性可能遭到破坏
    2. 保证事务的隔离性呵一致性
23. 并发控制的主要任务是什么
    1. 并发控制机制就是要用正确的方式调度并发操作，使一个用户事务的执行不受其他事务的干扰
24. 并发操作带来的数据不一致性包括哪三类
    1. 丢失修改
    2. 不可重复读
    3. 读"脏"数据
25. 什么是封锁？基本的封锁类型有几种？试述它们的含义
    1. 封锁是实现并发控制的一个非常重要的技术
    2. 排他锁
        1. 又称为写锁。若事务T对数据对象A加上X锁，则只允许T读取和修改A，其他任何事务都不能再对A加任何类型的锁，直到T释放A上的锁为止。这就保证了其他事务在T释放A上的锁之前不能再读取和修改A
    3. 共享锁
        1. 又称为读锁。若事务T对数据对象A加上S锁，则事务T可以读A但不能修改A，其他事务只能再对A加S锁，而不能加X锁，直到T释放A上的S锁为止。这就保证了其他事务可以读A，但在T释放A上的S锁之前不能对A做任何修改
26. 锁的相容矩阵 
    | T1\T2 | X   | S   | -   |
    | ----- | --- | --- | --- |
    | X     | N   | N   | Y   |
    | S     | N   | Y   | Y   |
    | -     | Y   | Y   | Y   |
27. 什么是封锁协议？三级封锁协议的概念与作用是什么
    - 一级封锁协议
        - 事务T在修改数据R之前必须先对其加X锁，直到事务结束才释放
    - 二级封锁协议
        - 在一级封锁协议基础上增加事务T在读取数据R之前必须先对其加S锁，读完后即可释放S锁
    - 三级封锁协议
        - 在一级封锁协议的基础上增加事务T在读取数据R之前必须先对其加S锁，直到事务结束才释放
28. 什么是死锁与活锁？如何预防死锁
    - 活锁：某一事务可能永远等待
    - 死锁：某些事务相互等待，永远不能结束
    - 预防死锁：
        - 一次封锁法
        - 顺序封锁法
29. 什么样的并发操作调度是正确的
    - 可串行化调度
30. 选择封锁粒度的原则是什么
    - 封锁粒度与系统的并发度和并发控制的开销密切相关

## 七 数据库恢复技术
31. 数据库运行中可能产生的故障有哪几类？各种故障的定义
    1. 事务内部的故障：更多指非预期，不能用应用程序处理的
    2. 系统故障：指造成系统停止运转的任何事件，使得系统要重新启动
    3. 介质故障：硬故障。指外存故障，如磁盘损坏、磁头碰撞，瞬时强磁场干扰等
    4. 计算机病毒：一种人为的故障或破坏，是一些恶作剧者研制的一种计算机程序
32. 什么叫数据备份/转储？转储方式及转储状态分别有哪些
    1. 数据库恢复中采用的基本技术。所谓转储即数据库管理员定期地将整个数据库复制到磁带、磁盘或其他存储介质上保存起来的过程。
    2. 转储方式：
        1. 海量转储
        2. 增量转储
    3. 转储状态：
        1. 静态转储
        2. 动态转储
33. 日志文件的作用是什么？日志文件有哪两种格式？每种格式的日志文件需要登记的内容包括哪些？登记日志文件的原则是什么？
    1. 作用
        1. 事务故障恢复和系统故障恢复必须用日志文件
        2. 在动态转储方式中必须建立日志文件，后备副本和日志文件结合起来才能有效地恢复数据库
        3. 在静态转储方式中也可以建立日志文件，当数据库毁坏后可重新装入后援副本
    2. 格式
        1. 以记录为单位的日志文件
        2. 以数据块为单位的日志文件
    3. 登记内容
        1. 格式1
            1. 事务标识
            2. 操作的类型
            3. 操作对象
            4. 更新前数据的旧值
            5. 更新后数据的新值
        2. 格式2
            1. 事务标识
            2. 被更新的数据块
    4. 原则
        1. 登记的次序严格按并发事务执行的事件次序
        2. 必须先写日志文件，后写数据库
34. SQL Server支持的备份类型有哪些？
    1. 全备份
    2. 差异备份
    3. 日志备份
    4. 文件组备份
35. 数据库备份方法（利用SSMS管理备份设备、备份数据库、数据库的差异备份）。

36. 使用T-SQL进行数据库备份
37. 故障可分为3类？数据库故障产生的原因是什么？
38. 什么叫数据恢复？针对不同的故障（事务故障、系统故障、介质故障），有哪些恢复策略和方法。
39. 数据恢复类型（全盘恢复、个别文件恢复、重定向恢复）
40. 数据恢复模式
41. 恢复数据库方法（使用SSMS恢复数据库、使用备份设备恢复数据库、使用T-SQL语句恢复数据库）
42. 使用T-SQL进行数据库恢复
43. 什么是数据库镜像？数据库镜像有何用途？

## 八 权限管理
44. 概念：角色、用户、登录用户、数据库用户
    1. 
45. 基于角色的访问控制如何实现权限控制？
46. SQL Server访问控制与SQL Server身份验证模式是怎样的？
47. SQL Server中，如何创建、修改、禁止和删除登录账户？固定服务器角色有哪些？如何自定义服务器角色？
48. SQL Server中，如何创建、修改、禁止和删除数据库用户？固定数据库角色有哪些？如何自定义数据库角色？
49. SQL Server中，数据库权限分为哪三类？（①系统权限（隐含权限）、②对象权限、③语句权限）
50. SQL Server中权限管理的内容包括哪些（授予权限、收回权限、否认权限等几个方面）。
51. 存取控制（自主存取控制、强制存取控制）
52. 熟练使用Tractans-SQL的GRANT和REVOKE语句完成授权定义和存取控制功能。

## 九 数据库审计
53. 什么是数据库审计功能
54. 为什么要提供审计功能
55. 数据库的审计系统有哪些功能和特点
56. 审计系统的建设目标是什么

## 十 SQL注入
57. 什么是SQL注入攻击
58. SQL注入攻击有何有何特点和危害
59. 如何防御SQL注入攻击
